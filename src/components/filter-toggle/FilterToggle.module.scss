$font-size: 14px;
$text-color: #111827;
$muted-color: #6b7280;
$track-bg: #e6eef5;
$track-checked-bg: #0366d6;
$knob-bg: #ffffff;
$focus-ring: rgba(3, 102, 214, 0.18);
$radius: 9999px; // pill
$toggle-width: 36px;
$toggle-height: 20px;
$knob-size: 16px;
$gap: 8px;

.toggle {
    display: inline-flex;
    align-items: center;
    gap: $gap;
    cursor: pointer;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    line-height: 1;

    input[type="checkbox"] {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0 0 0 0);
        white-space: nowrap;
        border: 0;
    }

    .muted {
        position: relative;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        font-size: $font-size;
        color: $muted-color;
        padding-left: ($toggle-width + 12px);
        line-height: 1;

        &::before {
            content: "";
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: $toggle-width;
            height: $toggle-height;
            border-radius: $radius;
            background: $track-bg;
            box-shadow: inset 0 -1px 0 rgba(16, 24, 40, 0.03);
            transition: background 160ms ease, box-shadow 160ms ease;
        }

        &::after {
            content: "";
            position: absolute;
            left: 2px;
            top: 50%;
            transform: translateY(-50%);
            width: $knob-size;
            height: $knob-size;
            border-radius: 50%;
            background: $knob-bg;
            box-shadow: 0 1px 2px rgba(16, 24, 40, 0.08);
            transition: transform 160ms cubic-bezier(.2, .9, .2, 1), background 160ms ease, box-shadow 160ms ease;
        }
    }

    input[type="checkbox"]:checked+.muted {
        color: $text-color;

        &::before {
            background: $track-checked-bg;
            box-shadow: none;
        }

        &::after {
            transform: translateY(-50%) translateX(calc(#{$toggle-width} - #{$knob-size} - 4px));
            background: $knob-bg;
            box-shadow: 0 2px 6px rgba(3, 102, 214, 0.14);
        }
    }

    input[type="checkbox"]:focus-visible+.muted::before {
        box-shadow: 0 0 0 6px $focus-ring;
    }

    input[type="checkbox"]:disabled+.muted {
        opacity: 0.5;
        cursor: not-allowed;

        &::before,
        &::after {
            box-shadow: none;
        }
    }

    &.compact {
        .muted {
            font-size: 13px;
            padding-left: 32px;
        }

        .muted::before {
            width: 24px;
            height: 14px;
        }

        .muted::after {
            width: 12px;
            height: 12px;
            left: 1px;
        }

        input[type="checkbox"]:checked+.muted::after {
            transform: translateY(-50%) translateX(calc(24px - 12px - 2px));
        }
    }

    @media (prefers-reduced-motion: reduce) {

        .muted::before,
        .muted::after {
            transition: none !important;
        }
    }
}